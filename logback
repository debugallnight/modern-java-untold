<?xml version="1.0" encoding="UTF-8"?>
    <configuration>
     <springProperty scope="context" name="app_name" source="spring.application.name"/>
    	<appender name="consoleAppender" class="ch.qos.logback.core.ConsoleAppender">
    		<encoder>
    			<Pattern>%date %-5level [%logger] [%X{errorId:-N/A}] [App:${app_name:-N/A}, TraceId: %X{X-B3-TraceId:-N/A}, SpanId: %X{X-B3-SpanId:-N/A}, ParentSpanId: %X{X-B3-ParentSpanId:-N/A}]---[%thread]: %m%n
    			</Pattern>
    		</encoder>
    		<filter class="ch.qos.logback.classic.filter.ThresholdFilter">
    			<level>TRACE</level>
    		</filter>
    	</appender>
      	<appender name="rollingFileAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
    		<File>logs/party-service-core.log</File>
    		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
    		    <!-- daily rollover -->
    			<FileNamePattern>logs/party-service-core-%d{yyyy-MM-dd}.log</FileNamePattern>

    			<!-- keep 30 days' worth of history -->
    			<!--  
    			<maxHistory>30</maxHistory>	
    			-->		
    		</rollingPolicy>
    		<encoder>
    			<Pattern>%date %-5level [%logger] [%X{errorId:-N/A}] [App:${app_name:-N/A}, TraceId: %X{X-B3-TraceId:-N/A}, SpanId: %X{X-B3-SpanId:-N/A}, ParentSpanId: %X{X-B3-ParentSpanId:-N/A}]---[%thread]: %m%n</Pattern>
    		</encoder> 	    
      	</appender> 
      	
      	<logger name="org.springframework.cloud.config" additivity="false">
    	    <level value="INFO" />
    		<appender-ref ref="rollingFileAppender"/>
    		<appender-ref ref="consoleAppender" />
    	</logger>

    	<logger name="org.springframework.web" additivity="false">
    	    <level value="INFO" />
    		<appender-ref ref="rollingFileAppender"/>
    		<appender-ref ref="consoleAppender" />
    	</logger>
    	
    	<logger name="org.apache.http" additivity="false">
    	    <level value="INFO" />
    		<appender-ref ref="rollingFileAppender"/>
    		<appender-ref ref="consoleAppender" />
    	</logger>
    	<logger name="com.netflix.discovery" additivity="false">
    	    <level value="INFO" />
    		<appender-ref ref="rollingFileAppender"/>
    		<appender-ref ref="consoleAppender" />
    	</logger>

    	<root>
    		<level value="INFO" />
    		<appender-ref ref="rollingFileAppender"/>
    		<appender-ref ref="consoleAppender" />
    	</root>
    </configuration>
